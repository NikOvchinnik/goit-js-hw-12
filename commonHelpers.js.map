{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function searchImgs(imgName, page) {\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/?';\n  const params = {\n    key: '42408042-b97fa2d9d3888df0f8d594195',\n    q: `${imgName}`,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: page,\n    per_page: 15,\n  };\n\n  const url = BASE_URL + END_POINT;\n  const res = await axios.get(url, { params });\n\n  return res.data;\n}\n","import { refs } from '../main';\nimport { simpleGallery } from '../main';\n\nexport function renderImg(imgsObj) {\n  const markup = imgsObj.hits\n    .map(img => {\n      return `<li class=\"gallery-item\">\n      <a href=\"${img.largeImageURL}\">\n        <img\n          src=${img.webformatURL}\n          alt=${img.tags}\n          width=\"360\"\n          height=\"200\"\n        />\n        </a>\n        <ul class=\"img-list-info\">\n          <li class=\"img-item\">\n            <h2 class=\"img-title\">Likes</h2>\n            <p class=\"img-text\">${img.likes}</p>\n          </li>\n          <li class=\"img-item\">\n            <h2 class=\"img-title\">Views</h2>\n            <p class=\"img-text\">${img.views}</p>\n          </li>\n          <li class=\"img-item\">\n            <h2 class=\"img-title\">Comments</h2>\n            <p class=\"img-text\">${img.comments}</p>\n          </li>\n          <li class=\"img-item\">\n            <h2 class=\"img-title\">Downloads</h2>\n            <p class=\"img-text\">${img.downloads}</p>\n          </li>\n        </ul>\n      </li>`;\n    })\n    .join('');\n\n  refs.listElem.insertAdjacentHTML('beforeend', markup);\n  simpleGallery.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { searchImgs } from './js/pixabay-api';\nimport { renderImg } from './js/render-functions';\n\nexport const refs = {\n  formElem: document.querySelector('.form-search'),\n  listElem: document.querySelector('.gallery-list'),\n  loaderElem: document.querySelector('.loader-container'),\n  btnLoadElem: document.querySelector('.btn-load'),\n};\n\nlet query = '';\nlet currentPage = 1;\nlet totalPages = 0;\n\nrefs.formElem.addEventListener('submit', onSubmitForm);\n\nasync function onSubmitForm(e) {\n  e.preventDefault();\n  query = e.target.elements.image.value.trim();\n  if (!query) {\n    return iziToast.show({\n      title: 'Error',\n      titleColor: '#fff',\n      titleSize: '16',\n      titleLineHeight: '1.5',\n      message: 'Please, enter name of image',\n      messageColor: '#fff',\n      messageSize: '16',\n      messageLineHeight: '1.5',\n      backgroundColor: '#ef4040',\n      position: 'topRight',\n    });\n  }\n\n  refs.listElem.innerHTML = '';\n  btnLoadHide();\n  loaderShow();\n  currentPage = 1;\n\n  await searchImgs(query, currentPage)\n    .then(data => {\n      totalPages = Math.ceil(data.totalHits / 15);\n      if (totalPages === 0) {\n        return reject();\n      }\n      renderImg(data);\n      if (totalPages > currentPage) {\n        btnLoadShow();\n        refs.btnLoadElem.addEventListener('click', onLoadBtn);\n      }\n    })\n    .catch(error => {\n      btnLoadHide();\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#fff',\n        messageSize: '16',\n        messageLineHeight: '1.5',\n        backgroundColor: '#ef4040',\n        position: 'topRight',\n      });\n    })\n    .finally(() => {\n      loaderHide();\n      refs.formElem.reset();\n    });\n}\n\nconst options = {\n  captionDelay: 250,\n  captionsData: 'alt',\n};\n\nexport const simpleGallery = new SimpleLightbox('.gallery-list a', options);\n\nfunction loaderHide() {\n  refs.loaderElem.classList.add('is-hidden');\n}\n\nfunction loaderShow() {\n  refs.loaderElem.classList.remove('is-hidden');\n}\n\nasync function onLoadBtn() {\n  btnLoadHide();\n  loaderShow();\n  currentPage += 1;\n  await searchImgs(query, currentPage)\n    .then(data => {\n      renderImg(data);\n      if (totalPages > currentPage) {\n        btnLoadShow();\n      } else {\n        iziToast.show({\n          message: 'Were sorry, but youve reached the end of search results.',\n          messageColor: '#fff',\n          messageSize: '16',\n          messageLineHeight: '1.5',\n          backgroundColor: '#00FFFF',\n          position: 'topRight',\n        });\n      } \n      const galleryItemElem = document.querySelector('.gallery-item');\n      const sizeItemElem = galleryItemElem.getBoundingClientRect();\n      scrollBy({\n        behavior: 'smooth',\n        top: sizeItemElem.height * 2.7,\n      });\n    })\n    .catch(error => {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#fff',\n        messageSize: '16',\n        messageLineHeight: '1.5',\n        backgroundColor: '#ef4040',\n        position: 'topRight',\n      });\n    })\n    .finally(() => {\n      loaderHide();\n    });\n}\n\nfunction btnLoadHide() {\n  refs.btnLoadElem.classList.add('is-hidden');\n}\n\nfunction btnLoadShow() {\n  refs.btnLoadElem.classList.remove('is-hidden');\n}\n"],"names":["searchImgs","imgName","page","BASE_URL","END_POINT","params","url","axios","renderImg","imgsObj","markup","img","refs","simpleGallery","query","currentPage","totalPages","onSubmitForm","e","iziToast","btnLoadHide","loaderShow","data","btnLoadShow","onLoadBtn","error","loaderHide","options","SimpleLightbox","sizeItemElem"],"mappings":"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"}